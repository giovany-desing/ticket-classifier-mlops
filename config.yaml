# -------------------
# Configuración de Datos
# -------------------
data:
  raw_path: "data-tickets-train"  # ← Sin el nombre del archivo
  dataset_name: "dataset_tickets.csv"
  target_col: "etiqueta"

# -------------------
# Configuracion para experimento para MLflow
# -------------------
mlflow_tracking:
  # Nombre del experimento en la UI de MLflow
  experiment_name: "Clasificacion de tickets Fidudavivienda"

preprocessing:
  custom_stopwords:
    - "buen"
    - "buenos"
    - "buen" 
    - "buenos"
    - "dia" 
    - "tardes"
    - "buenas"
    - "grupo"
    - "asignación"
    - "asignacin"
    - "asignanar"
    - "asignado"
    - "davinci"
    - "preventa"
    - "fiduciaria"
    - "respuesta"
    - "proveedor"
    - "favor"
    - "pronta"
    - "quedo"
    - "atento"
    - "sebastian"
    - "sebastin"
    - "prado"
    - "vanegas"
    - "identificación"
    - "one"
    - "id"
    - "vinculacion"
    - "preventas"
    - "muchas"
    - "gracias"
    - "cliente"
    - "atentos"
    - "soporte"
    - "cc"
  language: "spanish"
  apply_stemming: true

# -------------------
# Configuración de Monitoreo y MLOps
# -------------------
monitoring:
  # Umbrales para detección de drift
  drift_threshold: 0.05  # p-value para considerar drift
  drift_score_threshold: 0.5  # Score de drift para trigger reentrenamiento
  min_predictions_for_drift: 100  # Mínimo de predicciones para analizar drift
  performance_drop_threshold: 0.05  # Caída de performance para trigger (5%)
  
  # Configuración de evaluación
  min_labeled_predictions: 50  # Mínimo de predicciones etiquetadas para evaluación
  evaluation_window_hours: 48  # Ventana de tiempo para evaluación
  
  # Configuración de reentrenamiento
  retrain_on_drift: true  # Reentrenar automáticamente si hay drift
  retrain_on_performance_drop: true  # Reentrenar si performance baja
  min_improvement_for_deploy: 0.01  # Mejora mínima (1%) para hacer deploy del nuevo modelo

# -------------------
# Thresholds y configuración avanzada
# -------------------
thresholds:
  # Drift detection
  drift_score_threshold: 0.5
  ks_test_threshold: 0.05
  chi2_test_threshold: 0.05
  vocab_growth_threshold: 1.2
  
  # Performance
  f1_score_minimum: 0.85
  performance_drop_threshold: 0.05
  min_improvement_for_deploy: 0.01
  
  # Confidence
  low_confidence_threshold: 0.6
  low_confidence_ratio_max: 0.3
  
  # Data requirements
  min_samples_training: 100
  min_predictions_for_drift: 50
  min_labeled_predictions: 50
  
  # Retention
  metrics_retention_days: 30
  backup_retention_count: 5

# Training configuration
training:
  test_size: 0.2
  random_seed: 42
  n_trials_default: 20
  n_trials_ci: 10
  cv_folds_default: 3
  cv_folds_ci: 2
  max_features: 5000

# Timeouts (segundos)
timeouts:
  api_health_check: 5
  api_drift_check: 10
  training_max: 3600
  dvc_operation: 300

# -------------------
# Configuración de API
# -------------------
api:
  host: "0.0.0.0"
  port: 8000
  log_dir: "monitoring/logs"

# -------------------
# Configuración de Base de Datos (Supabase)
# -------------------
database:
  # Configurar via variables de entorno:
  # SUPABASE_URL: URL de tu proyecto Supabase
  # SUPABASE_KEY: API key de Supabase (anon key)
  table_name: "tickets_fiducia"
  auto_update: true  # Actualizar BD automáticamente al predecir